var feedbackButton=document.querySelector(".feedback-button"),feedbackPopup=document.querySelector(".feedback-wrapper"),modalClose=feedbackPopup.querySelector(".modal-close"),inputName=document.querySelector("[name=user-name]"),inputEmail=document.querySelector("[name=feedback-email]"),inputText=document.querySelector("[name=user-message]"),formWriteUs=feedbackPopup.querySelector("form"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}feedbackButton.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.add("opened"),inputName.classList.contains("invalid")&&inputName.classList.remove("invalid"),inputEmail.classList.contains("invalid")&&inputEmail.classList.remove("invalid"),inputText.classList.contains("invalid")&&inputText.classList.remove("invalid"),storageName&&storageEmail?(inputName.value=storageName,inputEmail.value=storageEmail,inputText.focus()):inputName.focus()}),modalClose.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.remove("opened"),formWriteUs.classList.remove("modal-error")}),formWriteUs.addEventListener("submit",function(e){inputName.value&&inputEmail.value&&inputText.value?isStorageSupport&&(localStorage.setItem("userName",inputName.value),localStorage.setItem("userEmail",inputEmail.value)):(e.preventDefault(),formWriteUs.classList.remove("modal-error"),formWriteUs.offsetWidth=formWriteUs.offsetWidth,formWriteUs.classList.add("modal-error"),inputName.value||inputName.classList.add("invalid"),inputEmail.value||inputEmail.classList.add("invalid"),inputText.value||inputText.classList.add("invalid"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),feedbackPopup.classList.contains("opened")&&(feedbackPopup.classList.remove("opened"),formWriteUs.classList.remove("modal-error")))});
